<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ultimate Autofill - Settings</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;font-size:14px;color:#1a1a2e;background:#f8f9fa}
    .hdr{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 32px}
    .hdr h1{font-size:22px;font-weight:700}.hdr p{font-size:13px;opacity:.85;margin-top:4px}
    .tabs{display:flex;background:#fff;border-bottom:2px solid #e9ecef;padding:0 32px}
    .tab{padding:14px 20px;cursor:pointer;font-size:14px;font-weight:500;color:#868e96;border-bottom:2px solid transparent;margin-bottom:-2px;transition:all .15s}
    .tab:hover{color:#495057}.tab.active{color:#667eea;border-bottom-color:#667eea}
    .tc{display:none;padding:24px 32px;max-width:1100px}.tc.active{display:block}
    .card{background:#fff;border:1px solid #e9ecef;border-radius:10px;padding:20px;margin-bottom:16px}
    .card h2{font-size:16px;margin-bottom:12px;color:#343a40}
    input[type=text],input[type=search],input[type=password],textarea,select{width:100%;padding:10px 12px;border:1px solid #dee2e6;border-radius:6px;font-size:13px;font-family:inherit;outline:none;transition:border-color .15s}
    input:focus,textarea:focus,select:focus{border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.15)}
    textarea{resize:vertical;min-height:80px}
    label{display:block;font-weight:500;margin-bottom:6px;font-size:13px}
    .btn{padding:8px 16px;border:1px solid #dee2e6;border-radius:6px;background:#fff;cursor:pointer;font-size:13px;font-family:inherit;transition:all .15s}
    .btn:hover{background:#f1f3f5}
    .btn-p{background:#667eea;color:#fff;border:none}.btn-p:hover{background:#5a6fd6}
    .btn-d{background:#dc3545;color:#fff;border:none}.btn-d:hover{background:#c82333}
    .btn-s{padding:5px 10px;font-size:12px}
    table{width:100%;border-collapse:collapse}
    th,td{text-align:left;padding:10px 12px;border-bottom:1px solid #e9ecef;font-size:13px}
    th{background:#f8f9fa;font-weight:600;color:#495057}
    tr:hover td{background:#f8f9fa}
    .toolbar{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
    .toolbar .sb{flex:1;min-width:200px}
    .badge{display:inline-block;padding:2px 8px;border-radius:10px;font-size:11px;font-weight:600}
    .badge-s{background:#d4edda;color:#155724}
    .badge-w{background:#fff3cd;color:#856404}
    .badge-d{background:#f8d7da;color:#721c24}
    .badge-g{background:#e9ecef;color:#495057}
    .badge-i{background:#e8f4fd;color:#0c5460}
    .modal-bg{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:1000;justify-content:center;align-items:center}
    .modal-bg.on{display:flex}
    .modal{background:#fff;border-radius:12px;padding:24px;max-width:560px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.15)}
    .modal h3{margin-bottom:16px}
    .fg{margin-bottom:14px}
    .fa{display:flex;gap:8px;justify-content:flex-end;margin-top:20px}
    .toast{position:fixed;bottom:24px;right:24px;padding:12px 20px;background:#343a40;color:#fff;border-radius:8px;font-size:13px;z-index:2000;transform:translateY(100px);opacity:0;transition:all .3s}
    .toast.show{transform:translateY(0);opacity:1}
    .chk{width:16px;height:16px;cursor:pointer}
    .muted{color:#868e96;font-size:12px}
    .mt2{margin-top:8px}.mt4{margin-top:16px}.mb2{margin-bottom:8px}
    .fr{display:flex;gap:10px;align-items:center}.f1{flex:1}
  </style>
</head>
<body>
  <div class="hdr"><h1>Ultimate Autofill</h1><p>Manage saved responses, job queue, and settings</p></div>
  <div class="tabs">
    <div class="tab active" data-tab="responses">Saved Responses</div>
    <div class="tab" data-tab="jobqueue">Job Queue</div>
    <div class="tab" data-tab="settings">Settings</div>
  </div>

  <!-- RESPONSES TAB -->
  <div id="tab-responses" class="tc active">
    <div class="card">
      <div class="toolbar">
        <input type="search" id="searchR" class="sb" placeholder="Search by keyword, question, or response...">
        <select id="libSelect" style="width:auto;min-width:140px"></select>
        <button class="btn btn-p" id="btnAdd">+ New</button>
        <button class="btn" id="btnImport">Import JSON</button>
        <button class="btn" id="btnExport">Export JSON</button>
        <button class="btn" id="btnExportEnc">Export Encrypted</button>
        <button class="btn" id="btnDups">Find Duplicates</button>
      </div>
      <div class="toolbar">
        <label style="display:flex;align-items:center;gap:4px;margin-bottom:0"><input type="checkbox" id="selAll" class="chk"> Select All</label>
        <button class="btn btn-s" id="btnBTag" disabled>Bulk Tag</button>
        <button class="btn btn-s btn-d" id="btnBDel" disabled>Delete Selected</button>
        <span id="selCnt" class="muted"></span>
      </div>
      <table><thead><tr><th style="width:30px"></th><th>Question / Key</th><th>Response</th><th>Keywords</th><th style="width:60px">Uses</th><th style="width:100px">Actions</th></tr></thead><tbody id="rBody"></tbody></table>
      <div id="noR" class="muted mt4" style="text-align:center;display:none">No saved responses. Add or import.</div>
    </div>
    <div id="dupsCard" class="card" style="display:none"><h2>Duplicate Suggestions</h2><div id="dupsList"></div></div>
  </div>

  <!-- JOB QUEUE TAB -->
  <div id="tab-jobqueue" class="tc">
    <div class="card">
      <h2>Job Queue</h2>
      <div class="toolbar">
        <button class="btn btn-p" id="btnImportCSV">Import CSV</button>
        <button class="btn" id="btnExportQ">Export Queue</button>
        <button class="btn btn-d" id="btnClearQ">Clear All</button>
        <span id="qStats" class="muted"></span>
      </div>
      <table><thead><tr><th style="width:40px">#</th><th>URL</th><th>Company</th><th>Role</th><th style="width:100px">Status</th><th style="width:180px">Actions</th></tr></thead><tbody id="qBody"></tbody></table>
      <div id="noQ" class="muted mt4" style="text-align:center;display:none">No jobs in queue. Import a CSV.</div>
    </div>
  </div>

  <!-- SETTINGS TAB -->
  <div id="tab-settings" class="tc">
    <div class="card"><h2>Libraries / Profiles</h2><p class="muted mb2">Create multiple response libraries (e.g. Ireland, UK, US) and assign per domain.</p><div class="toolbar"><button class="btn btn-p" id="btnNewLib">+ New Library</button></div><div id="libsList"></div></div>
    <div class="card"><h2>Domain Mappings</h2><p class="muted mb2">Assign a library when visiting a specific domain.</p><div id="dmList"></div><div class="fr mt2"><input type="text" id="newDom" placeholder="e.g. workday.com" style="flex:1"><select id="newDomLib" style="width:auto;min-width:140px"></select><button class="btn btn-p btn-s" id="btnAddDM">Add</button></div></div>
    <div class="card"><h2>About</h2><p class="muted">Ultimate Autofill v1.0.0 â€” Offline-first. Never auto-submits. Never bypasses bot protections.</p></div>
  </div>

  <!-- MODALS -->
  <div id="respModal" class="modal-bg">
    <div class="modal">
      <h3 id="rmTitle">New Saved Response</h3>
      <div class="fg"><label>Question</label><input type="text" id="mQ" placeholder="e.g. First Name"></div>
      <div class="fg"><label>Response</label><textarea id="mR" placeholder="Your answer..."></textarea></div>
      <div class="fg"><label>Keywords (comma-separated)</label><input type="text" id="mK" placeholder="e.g. first, name"></div>
      <div class="fg"><label>Tags (comma-separated, optional)</label><input type="text" id="mT" placeholder="e.g. personal, contact"></div>
      <input type="hidden" id="mId">
      <div class="fa"><button class="btn" id="mCancel">Cancel</button><button class="btn btn-p" id="mSave">Save</button></div>
    </div>
  </div>
  <div id="tagModal" class="modal-bg">
    <div class="modal"><h3>Bulk Tag</h3><div class="fg"><label>Tags (comma-separated)</label><input type="text" id="btInput" placeholder="e.g. personal"></div><div class="fa"><button class="btn" id="btCancel">Cancel</button><button class="btn btn-p" id="btApply">Apply</button></div></div>
  </div>
  <div id="impModal" class="modal-bg">
    <div class="modal"><h3 id="impTitle">Import</h3><div class="fg"><label>Select file</label><input type="file" id="impFile" accept=".json,.csv,.txt"></div><div class="fg" id="impPwGrp" style="display:none"><label>Decryption passphrase</label><input type="password" id="impPw"></div><div class="fa"><button class="btn" id="impCancel">Cancel</button><button class="btn btn-p" id="impOk">Import</button></div></div>
  </div>
  <div id="encModal" class="modal-bg">
    <div class="modal"><h3>Export Encrypted</h3><div class="fg"><label>Passphrase</label><input type="password" id="encPw" placeholder="Enter passphrase"></div><div class="fa"><button class="btn" id="encCancel">Cancel</button><button class="btn btn-p" id="encOk">Export</button></div></div>
  </div>
  <div id="toast" class="toast"></div>
  <script src="../options.js"></script>
</body>
</html>
